# docs/profile.yaml
paths:
  /profile/me:
    get:
      summary: Retrieve the logged-in user's profile
      tags: [Profile] # CRITICAL: This groups this endpoint under the "Profile" category in the UI.
      description: Fetches the complete profile information for the user authenticated by the JWT.
      security: # Specifies that this endpoint is protected.
        - bearerAuth: []
      responses:
        '200':
          description: Success. Returns the user's profile object.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'  # THE MAGIC: This says "The response body is a User object. Go look in components.yaml for the definition."
        '401':
          description: Unauthorized. Token is missing or invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error' # REUSE: Points to our standard Error object.
 
  /profile:
    put:
      summary: Update the logged-in user's profile
      tags: [Profile]
      description: Allows a logged-in user to update their username, bio, and image URL.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  example: 'john_doe_dev'
                bio:
                  type: string
                  example: 'Building the future.'
                imageUrl:
                  type: string
                  format: uri
                  example: 'https://example.com/new_image.jpg'
      responses:
        '200':
          description: Profile updated successfully. Returns the updated user object.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Bad Request. Invalid data provided or username is taken.
        '401':
          description: Unauthorized.